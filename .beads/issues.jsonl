{"id":"endive-2m0","title":"Post-simulation cleanup: Remove old main.py globals and functions","description":"After the Simulation runner (endive-9tv) replaces main.py orchestration, remove old global variables and functions that are no longer needed.\n\n## Tasks\n- Remove old global variables: T_CAS, T_PUT, MAX_PARALLEL, TABLE_METADATA_INLINED, STATS, etc.\n- Remove old functions: get_metadata_root_latency(), get_manifest_list_latency(), etc.\n- Remove old ConflictResolver class\n- Remove old txn_gen() function\n- Remove old txn_commit_cas() function\n- Clean up any remaining dead code in main.py\n- Update any remaining references\n- Run full test suite to confirm nothing breaks\n\n## Context\nThis is part of the dead code cleanup for the Endive simulator rewrite per SPEC.md. Blocked by the Simulation runner (endive-9tv). Blocks Migration (endive-uck).","status":"closed","priority":3,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:44:41Z","created_by":"Chris Douglas","updated_at":"2026-02-22T20:00:37Z","closed_at":"2026-02-22T20:00:37Z","close_reason":"Deleted old main.py code (2800+ lines), replaced with slim CLI using new modules","dependencies":[{"issue_id":"endive-2m0","depends_on_id":"endive-9tv","type":"blocks","created_at":"2026-02-22T18:45:02Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-3x2","title":"Generate analysis plots for exp1/exp2/exp3a/exp3b","description":"Run saturation_analysis for each experiment: exp1 (single curve), exp2 (--group-by fast_append_ratio), exp3a (--group-by storage_provider), exp3b (--group-by storage_provider). Verify all plots generate without errors.","status":"open","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:49Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:49Z","dependencies":[{"issue_id":"endive-3x2","depends_on_id":"endive-bgk","type":"blocks","created_at":"2026-02-23T01:26:57Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-3x2","depends_on_id":"endive-eqe","type":"blocks","created_at":"2026-02-23T01:26:57Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-3x2","depends_on_id":"endive-jnd","type":"blocks","created_at":"2026-02-23T01:26:56Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-4sc","title":"Run exp1/exp2/exp3a/exp3b experiment suite","description":"Run operation-type experiments with real_conflict_probability=0.0. 112 variants/seed, 5 seeds. Isolates operation type cost without real-conflict aborts.","status":"open","priority":1,"issue_type":"epic","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:31Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:31Z"}
{"id":"endive-603","title":"Evaluate rewritten simulator end-to-end","description":"Run simulator E2E, fix parquet schema gaps (operation_type, t_runtime), config loading gaps, and verify analysis pipeline","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T20:57:33Z","created_by":"Chris Douglas","updated_at":"2026-02-22T21:05:46Z","closed_at":"2026-02-22T21:05:46Z","close_reason":"E2E evaluation complete: parquet schema fixed, config loading fixed, simulation and analysis pipeline verified"}
{"id":"endive-86t","title":"Implement Workload generator with topology ownership","description":"Create endive/workload.py per SPEC.md §4. Includes:\n- WorkloadConfig dataclass (frozen): inter_arrival, runtime, operation weights, topology (num_tables, partitions_per_table), table/partition selectors, conflict params\n- Workload class: generates Transactions with encapsulated rate and parameters\n  - __init__ takes WorkloadConfig + seed (NOT a Catalog reference)\n  - Topology (num_tables, partitions_per_table) comes from config, not Catalog\n  - generate() yields Transactions at inter-arrival times\n  - _create_transaction() samples runtime, tables, partitions, operation type\n- TableSelector ABC + ZipfTableSelector (hot tables) + UniformTableSelector\n- PartitionSelector ABC + ZipfPartitionSelector + UniformPartitionSelector\n- Operation type sampling from weighted distribution\n\nUnit tests (tests/test_workload.py):\n- Workload generates transactions at correct inter-arrival rates\n- Operation type distribution matches configured weights (chi-squared test)\n- ZipfTableSelector produces skewed distribution\n- UniformTableSelector produces uniform distribution\n- Topology from WorkloadConfig, not Catalog (no Catalog dependency)\n- Deterministic with seeded RNG\n- tables_written is subset of tables_read","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:14:09Z","created_by":"Chris Douglas","updated_at":"2026-02-22T18:54:01Z","closed_at":"2026-02-22T18:54:01Z","close_reason":"Implemented Workload generator per SPEC.md §4. WorkloadConfig, Table/Partition selectors (Uniform+Zipf), operation type sampling. Topology from config, not Catalog. 51 tests all passing.","dependencies":[{"issue_id":"endive-86t","depends_on_id":"endive-iyg","type":"blocks","created_at":"2026-02-22T18:15:09Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-8f7","title":"Verify experiment results","description":"Check: (1) exp1: all fast_append, zero aborts at low load (2) exp2: op_type distribution matches FA/VO ratio, zero validation_exception, only max_retries_exceeded aborts (3) exp3a/3b: throughput ordering instant\u003es3x\u003eazurex\u003es3\u003egcp","status":"open","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:49Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:49Z","dependencies":[{"issue_id":"endive-8f7","depends_on_id":"endive-3x2","type":"blocks","created_at":"2026-02-23T01:26:58Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-8ig","title":"Phase 4: Run analysis pipeline on baseline","description":"Run saturation_analysis on baseline experiment, verify plots generated","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T20:58:56Z","created_by":"Chris Douglas","updated_at":"2026-02-22T21:02:20Z","closed_at":"2026-02-22T21:02:20Z","close_reason":"All 5 plots + 2 tables generated successfully. 7 experiments indexed, warmup/cooldown filtering working.","dependencies":[{"issue_id":"endive-8ig","depends_on_id":"endive-c7r","type":"blocks","created_at":"2026-02-22T20:59:01Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-9tv","title":"Implement Simulation runner and Statistics collector","description":"Create endive/simulation.py per SPEC.md §6. Includes:\n- SimulationConfig dataclass: duration, seed, storage, catalog, workload, conflict_detector, max_retries, backoff config\n- Simulation class: coordinates workload generation, transaction execution, statistics\n  - run() creates SimPy environment, starts workload, runs to duration\n  - _run_workload() generates and launches transactions as SimPy processes\n  - _execute_transaction() runs single txn through execute() and records result\n- Statistics class: aggregate counters (committed, aborted, false/real conflicts, validation_exceptions, I/O counters)\n  - record_transaction() updates counters from TransactionResult\n  - to_dataframe() exports to pandas DataFrame\n  - export_parquet() writes results file\n\nUnit tests (tests/test_simulation.py):\n- Simulation runs to configured duration\n- Statistics counts match transaction outcomes\n- Deterministic: same seed = identical results\n- Backoff configuration applied correctly\n- All transactions recorded in statistics\n\nIntegration tests (tests/test_simulation_integration.py):\n- Full simulation with CASCatalog + S3StorageProvider + Workload\n- Throughput, latency, success rate are reasonable\n- Zero real conflicts with 100% FastAppend workload\n- High abort rate with 100% ValidatedOverwrite + high conflict probability\n- End-to-end: config → simulation → parquet output","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:14:16Z","created_by":"Chris Douglas","updated_at":"2026-02-22T19:46:57Z","closed_at":"2026-02-22T19:46:57Z","close_reason":"Implemented simulation.py (SimulationConfig, Statistics, Simulation with SimPy bridge) and test_simulation.py (33 tests all passing)","dependencies":[{"issue_id":"endive-9tv","depends_on_id":"endive-86t","type":"blocks","created_at":"2026-02-22T18:15:18Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-9tv","depends_on_id":"endive-f34","type":"blocks","created_at":"2026-02-22T18:15:15Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-9tv","depends_on_id":"endive-iyg","type":"blocks","created_at":"2026-02-22T18:15:12Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-9tv","depends_on_id":"endive-mli","type":"blocks","created_at":"2026-02-22T18:44:51Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-9tv","depends_on_id":"endive-s96","type":"blocks","created_at":"2026-02-22T18:44:59Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-9tv","depends_on_id":"endive-ta7","type":"blocks","created_at":"2026-02-22T18:44:54Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-bgk","title":"Run exp2 (op_type_heatmap) with 5 seeds","description":"Run: python scripts/run_all_experiments.py --groups op_type_heatmap --seeds 5. 8 loads × 8 fa_ratios × 5 seeds = 320 runs. FA/VO mix sweep, instant catalog, real_conflict_prob=0.0.","status":"open","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:48Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:48Z","dependencies":[{"issue_id":"endive-bgk","depends_on_id":"endive-m91","type":"blocks","created_at":"2026-02-23T01:26:56Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-byj","title":"Implement TOML config loading and validation","description":"Create/update endive/config.py per SPEC.md §7. Includes:\n- load_simulation_config(path) -\u003e SimulationConfig: single entry point\n- _build_storage_provider(): constructs provider from [storage] section\n- _build_catalog(): constructs CAS/Append/Instant catalog with topology\n- _build_workload(): constructs Workload with topology from config (NOT from Catalog)\n- _build_conflict_detector(): constructs detector from [conflict] section\n- _build_partition_counts(): extracts per-table partition topology\n- validate_config(): comprehensive validation with errors and warnings\n  - Operation type weights sum to 1.0\n  - Provider supports required operations (CAS for CASCatalog, etc.)\n  - Topology consistency (partitions_per_table length == num_tables)\n- Backward compatibility: default config (100% fast_append) matches current behavior\n\nUnit tests (tests/test_config_loading.py):\n- Valid TOML loads without errors\n- Invalid config raises ConfigurationError with descriptive messages\n- Default operation weights: 100% fast_append\n- Provider capability validation (CAS requires supports_cas)\n- Topology validation (partition count matches table count)\n- Seed in config file, not CLI argument\n- Round-trip: load config → build simulation → verify all components wired correctly","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:14:25Z","created_by":"Chris Douglas","updated_at":"2026-02-22T19:51:40Z","closed_at":"2026-02-22T19:51:40Z","close_reason":"Implemented load_simulation_config() in config.py and 25 tests in test_config_loading.py","dependencies":[{"issue_id":"endive-byj","depends_on_id":"endive-86t","type":"blocks","created_at":"2026-02-22T18:15:31Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-byj","depends_on_id":"endive-f34","type":"blocks","created_at":"2026-02-22T18:15:28Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-byj","depends_on_id":"endive-jz9","type":"blocks","created_at":"2026-02-22T18:15:21Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-byj","depends_on_id":"endive-pcz","type":"blocks","created_at":"2026-02-22T18:15:24Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-c7r","title":"Phase 3: Run baseline experiment E2E","description":"Run exp1_fastappend_baseline.toml and verify parquet output columns","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T20:58:56Z","created_by":"Chris Douglas","updated_at":"2026-02-22T21:01:32Z","closed_at":"2026-02-22T21:01:32Z","close_reason":"27769 txns committed, all columns present: operation_type=fast_append, t_runtime populated, 14 columns total","dependencies":[{"issue_id":"endive-c7r","depends_on_id":"endive-q0o","type":"blocks","created_at":"2026-02-22T20:59:01Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-cfd","title":"Phase 1: Fix parquet schema (operation_type, t_runtime)","description":"Add operation_type and runtime_ms to TransactionResult, propagate to to_dataframe()","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T20:58:55Z","created_by":"Chris Douglas","updated_at":"2026-02-22T21:00:08Z","closed_at":"2026-02-22T21:00:08Z","close_reason":"Added operation_type and runtime_ms to TransactionResult, updated to_dataframe, fixed tests"}
{"id":"endive-eqe","title":"Run exp3a+3b (op_type_catalog) with 5 seeds","description":"Run: python scripts/run_all_experiments.py --groups op_type_catalog --seeds 5. 5 providers × 4 loads × 2 configs × 5 seeds = 200 runs. Catalog latency sweep across instant/s3x/azurex/s3/gcp.","status":"open","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:48Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:48Z","dependencies":[{"issue_id":"endive-eqe","depends_on_id":"endive-m91","type":"blocks","created_at":"2026-02-23T01:26:56Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-f34","title":"Implement ConflictDetector with probabilistic and partition-based modes","description":"Create endive/conflict_detector.py per SPEC.md §5. Includes:\n- ConflictDetector ABC: is_real_conflict(txn, current_snapshot, start_snapshot) -\u003e bool\n- ProbabilisticConflictDetector: returns real conflict with configured probability\n  - Respects txn.can_have_real_conflict() (FastAppend always returns False)\n- PartitionOverlapConflictDetector: checks per-(table, partition) version changes\n  - Compares start_snapshot partition versions vs current_snapshot\n  - Real conflict only if written partition was modified by concurrent txn\n\nUnit tests (tests/test_conflict_detector.py):\n- ProbabilisticConflictDetector with prob=0 never returns real conflict\n- ProbabilisticConflictDetector with prob=1 always returns real for ValidatedOverwrite\n- ProbabilisticConflictDetector respects can_have_real_conflict() (FastAppend immune)\n- PartitionOverlapConflictDetector detects same-partition modification\n- PartitionOverlapConflictDetector: different partitions = false conflict\n- Deterministic with seeded RNG","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:14:04Z","created_by":"Chris Douglas","updated_at":"2026-02-22T18:48:24Z","closed_at":"2026-02-22T18:48:24Z","close_reason":"Implemented ProbabilisticConflictDetector and PartitionOverlapConflictDetector per SPEC.md §5. Seeded RNG for determinism. 22 tests all passing.","dependencies":[{"issue_id":"endive-f34","depends_on_id":"endive-pcz","type":"blocks","created_at":"2026-02-22T18:15:06Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-iyg","title":"Implement Transaction types with conflict costs","description":"Create endive/transaction.py per SPEC.md §3. Includes:\n- TransactionStatus enum (PENDING, EXECUTING, COMMITTING, COMMITTED, ABORTED)\n- TransactionResult dataclass (frozen): status, timings, retry count, I/O counters, abort_reason\n- ConflictCost dataclass (frozen): metadata/ML/manifest reads and writes\n- Transaction ABC with:\n  - can_have_real_conflict(), get_conflict_cost(), should_abort_on_real_conflict()\n  - execute() orchestrates: read snapshot → execute → commit loop\n  - _commit_loop() abstract, calls catalog.commit() (uniform interface)\n- FastAppendTransaction: no real conflicts, cheap retry (1 ML read + 0-1 ML write)\n- MergeAppendTransaction: no real conflicts, re-merge manifests on retry\n- ValidatedOverwriteTransaction: real conflicts abort, I/O convoy (N historical ML reads)\n- All transactions use catalog.commit() — never try_cas/try_append\n\nUnit tests (tests/test_transaction_types.py):\n- FastAppend.can_have_real_conflict() == False\n- ValidatedOverwrite.should_abort_on_real_conflict() == True\n- get_conflict_cost() returns correct costs per type and n_behind\n- ConflictCost fields correct for ML+ mode vs standard mode\n- TransactionResult is immutable\n\nIntegration tests (tests/test_transaction_commit.py):\n- FastAppend commits successfully through CASCatalog\n- ValidatedOverwrite aborts on real conflict\n- MergeAppend retries with increasing manifest file I/O\n- Transaction uses only catalog.read() and catalog.commit()","status":"closed","priority":1,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:13:56Z","created_by":"Chris Douglas","updated_at":"2026-02-22T18:43:43Z","closed_at":"2026-02-22T18:43:43Z","close_reason":"Implemented Transaction types per SPEC.md §3. FastAppend/MergeAppend/ValidatedOverwrite with uniform commit interface, ConflictDetector ABC, 72 tests all passing.","dependencies":[{"issue_id":"endive-iyg","depends_on_id":"endive-pcz","type":"blocks","created_at":"2026-02-22T18:15:02Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-jnd","title":"Run exp1 (op_type_baseline) with 5 seeds","description":"Run: python scripts/run_all_experiments.py --groups op_type_baseline --seeds 5. 8 load values × 5 seeds = 40 runs. 100% FastAppend, instant catalog.","status":"open","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:47Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:47Z","dependencies":[{"issue_id":"endive-jnd","depends_on_id":"endive-m91","type":"blocks","created_at":"2026-02-23T01:26:55Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-jz9","title":"Implement StorageProvider interface and implementations","description":"Create endive/storage.py per SPEC.md §1. Includes:\n- StorageResult dataclass (frozen, immutable)\n- StorageProvider ABC with read/write/cas/append/tail_append methods\n- LatencyDistribution protocol with .sample() method\n- LogNormalDistribution implementation (from YCSB benchmarks)\n- S3StorageProvider, S3XStorageProvider, AzureStorageProvider, GCPStorageProvider\n- supports_cas/supports_append/supports_tail_append capability flags\n- UnsupportedOperationError for unavailable operations\n- Minimum latency floors per provider (from PROVIDER_PROFILES in config.py)\n- All latencies drawn from opaque distribution objects, never inline\n\nUnit tests (tests/test_storage_provider.py):\n- Each operation returns StorageResult with correct fields\n- Latency \u003e= min_latency for each provider\n- UnsupportedOperationError for unavailable operations (e.g., CAS on append-only)\n- Deterministic with seeded RNG\n- StorageResult is immutable (frozen dataclass)","status":"closed","priority":1,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:13:43Z","created_by":"Chris Douglas","updated_at":"2026-02-22T18:24:46Z","closed_at":"2026-02-22T18:24:46Z","close_reason":"Implemented endive/storage.py with 85 tests in tests/test_storage.py. All 564 existing tests still pass."}
{"id":"endive-lxq","title":"Set real_conflict_probability=0.0 in exp2 and exp3b configs","description":"Change exp2_mix_heatmap.toml and exp3b_catalog_latency_mix.toml: real_conflict_probability 0.1→0.0. Update header comments to remove mentions of real conflicts and ValidationException aborts. exp1 and exp3a already have 0.0.","status":"open","priority":1,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:47Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:47Z"}
{"id":"endive-m91","title":"Quick smoke test: run op_type_baseline with --quick --seeds 1","description":"Run: python scripts/run_all_experiments.py --groups op_type_baseline --quick --seeds 1. Verify output has operation_type/t_runtime columns, no validation_exception aborts.","status":"open","priority":1,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-23T01:26:47Z","created_by":"Chris Douglas","updated_at":"2026-02-23T01:26:47Z","dependencies":[{"issue_id":"endive-m91","depends_on_id":"endive-lxq","type":"blocks","created_at":"2026-02-23T01:26:55Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-mli","title":"Post-phase cleanup: Remove old storage_provider.py","description":"After StorageProvider (endive-jz9, already closed) was implemented as endive/storage.py, the old endive/storage_provider.py and its tests (tests/test_storage_provider_config.py) are redundant.\n\n## Tasks\n- Update main.py imports to use new storage.py\n- Remove old endive/storage_provider.py\n- Remove old tests/test_storage_provider_config.py\n- Verify no remaining references to old module\n- Run full test suite to confirm nothing breaks\n\n## Context\nThis is part of the dead code cleanup for the Endive simulator rewrite per SPEC.md. Blocks the Simulation runner (endive-9tv).","status":"closed","priority":3,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:44:23Z","created_by":"Chris Douglas","updated_at":"2026-02-22T19:38:49Z","closed_at":"2026-02-22T19:38:49Z","close_reason":"Consolidated old modules into endive/_legacy.py, deleted 5 old modules and 3 old test files. 676 tests pass."}
{"id":"endive-pcz","title":"Implement uniform Catalog interface (read/commit)","description":"Create endive/catalog.py per SPEC.md §2. Includes:\n- CatalogSnapshot dataclass (frozen): seq, tables, timestamp_ms, get_table(), get_partition_version()\n- TableMetadata dataclass (frozen): version, partition_versions\n- CommitResult dataclass (frozen): success, snapshot (None on success, present on failure), latency_ms\n- CASResult, AppendResult, IntentionRecord as internal types\n- Catalog ABC with read() and commit() only (uniform interface)\n- CASCatalog: wraps StorageProvider.cas() internally, returns CommitResult\n  - Success: CommitResult(True, None, latency) — no snapshot returned\n  - Failure: CommitResult(False, snapshot, latency) — snapshot for conflict resolution\n- AppendCatalog: wraps StorageProvider.append() + internal discovery read\n  - Handles physical failure (offset mismatch) internally\n  - Returns uniform CommitResult after append + discovery read\n- InstantCatalog: 1ms latency, CAS semantics, for testing\n\nUnit tests (tests/test_catalog.py):\n- CASCatalog: success returns no snapshot, failure returns snapshot\n- CASCatalog: seq increments by exactly 1 on success\n- AppendCatalog: commit includes discovery read cost in latency\n- AppendCatalog: physical failure handled internally\n- InstantCatalog: 1ms operations, CAS semantics\n- Snapshot immutability (frozen dataclass)\n- Catalog.seq never skips or decreases\n- read() returns consistent snapshot\n\nIntegration tests (tests/test_catalog_integration.py):\n- CASCatalog with real StorageProvider end-to-end\n- Multiple concurrent commits, only one succeeds per seq\n- CommitResult interface identical across CAS/Append/Instant","status":"closed","priority":1,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:13:50Z","created_by":"Chris Douglas","updated_at":"2026-02-22T18:31:45Z","closed_at":"2026-02-22T18:31:45Z","close_reason":"Implemented uniform Catalog interface per SPEC.md §2. CASCatalog, AppendCatalog, InstantCatalog with read()/commit() interface. 63 tests, all passing.","dependencies":[{"issue_id":"endive-pcz","depends_on_id":"endive-jz9","type":"blocks","created_at":"2026-02-22T18:14:59Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-q0o","title":"Phase 2: Fix config loading for baseline experiments","description":"Handle catalog.backend=service, recognize table_metadata_inlined/num_groups/ntable.zipf/seltbl.zipf","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T20:58:56Z","created_by":"Chris Douglas","updated_at":"2026-02-22T21:00:52Z","closed_at":"2026-02-22T21:00:52Z","close_reason":"catalog.backend=service handled, num_groups/table_metadata_inlined pass through without errors","dependencies":[{"issue_id":"endive-q0o","depends_on_id":"endive-cfd","type":"blocks","created_at":"2026-02-22T20:59:00Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-s96","title":"Post-phase cleanup: Remove legacy Txn/LogEntry and old operation.py/conflict.py","description":"After Transaction types (endive-iyg, already closed) were implemented in the new endive/transaction.py, the legacy Txn/LogEntry classes at the bottom of transaction.py, plus old endive/operation.py and endive/conflict.py, are redundant.\n\n## Tasks\n- Remove legacy Txn class from endive/transaction.py\n- Remove legacy LogEntry class from endive/transaction.py\n- Remove old endive/operation.py\n- Remove old endive/conflict.py\n- Update main.py to use new Transaction types (FastAppend, MergeAppend, ValidatedOverwrite)\n- Remove associated old tests if any\n- Verify no remaining references to old classes/modules\n- Run full test suite to confirm nothing breaks\n\n## Context\nThis is part of the dead code cleanup for the Endive simulator rewrite per SPEC.md. Blocks the Simulation runner (endive-9tv).","status":"closed","priority":3,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:44:36Z","created_by":"Chris Douglas","updated_at":"2026-02-22T19:38:49Z","closed_at":"2026-02-22T19:38:49Z","close_reason":"Consolidated old modules into endive/_legacy.py, deleted 5 old modules and 3 old test files. 676 tests pass."}
{"id":"endive-sn3","title":"Re-sync analysis and plotting pipeline with new schema","description":"Update endive/saturation_analysis.py, endive/capstats.py, and plotting scripts to work with the refactored simulator output. Includes:\n- Update capstats.py to collect from new TransactionResult/Statistics types\n  - Add abort_reason tracking (validation_exception vs max_retries)\n  - Add per-operation-type breakdowns (fast_append/merge_append/validated_overwrite)\n  - Track I/O counters (ML reads/writes, manifest file reads/writes)\n- Update saturation_analysis.py parameter extraction for new config keys\n  - Handle operation_types.fast_append, merge_append, validated_overwrite weights\n  - Handle new catalog_type field (cas/append/instant)\n- Update plotting functions for operation-type-aware analysis\n  - Latency breakdown by operation type\n  - Abort rate by operation type (validation_exceptions)\n  - I/O convoy visualization for ValidatedOverwrite\n- Update consolidated parquet schema if needed\n- Verify existing plot generation still works with new data\n\nUnit tests (tests/test_analysis_pipeline.py):\n- Parameter extraction handles new config keys\n- Statistics correctly aggregate by operation type\n- Plotting functions produce output without errors on new schema\n- Backward compatibility: old experiment data still loadable\n\nIntegration tests:\n- Run simulation → export parquet → load in analysis pipeline → generate plots\n- Verify plots contain operation-type breakdowns when configured","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:14:33Z","created_by":"Chris Douglas","updated_at":"2026-02-22T20:00:37Z","closed_at":"2026-02-22T20:00:37Z","close_reason":"New Statistics.to_dataframe() produces compatible parquet; analysis pipeline works unchanged","dependencies":[{"issue_id":"endive-sn3","depends_on_id":"endive-9tv","type":"blocks","created_at":"2026-02-22T18:15:33Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-ta7","title":"Post-phase cleanup: Remove old snapshot.py and catalog_provider.py","description":"After Catalog (endive-pcz, already closed) was implemented as endive/catalog.py, the old endive/snapshot.py, endive/catalog_provider.py, and their tests are redundant.\n\n## Tasks\n- Update imports throughout codebase to use new catalog.py types\n- Remove old endive/snapshot.py\n- Remove old endive/catalog_provider.py\n- Remove old tests/test_snapshot_api.py\n- Remove old tests/test_snapshot_versioning.py\n- Remove old tests/test_providers.py\n- Verify no remaining references to old modules\n- Run full test suite to confirm nothing breaks\n\n## Context\nThis is part of the dead code cleanup for the Endive simulator rewrite per SPEC.md. Blocks the Simulation runner (endive-9tv).","status":"closed","priority":3,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:44:31Z","created_by":"Chris Douglas","updated_at":"2026-02-22T19:38:49Z","closed_at":"2026-02-22T19:38:49Z","close_reason":"Consolidated old modules into endive/_legacy.py, deleted 5 old modules and 3 old test files. 676 tests pass."}
{"id":"endive-u1i","title":"Phase 5: Fix issues found during evaluation","description":"Fix any column mismatches, missing values, or analysis pipeline assumptions","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T20:58:57Z","created_by":"Chris Douglas","updated_at":"2026-02-22T21:05:45Z","closed_at":"2026-02-22T21:05:45Z","close_reason":"No issues found. All 479 tests pass, all 3 experiment types (FA, instant catalog, mixed ops) run correctly, analysis pipeline generates all plots.","dependencies":[{"issue_id":"endive-u1i","depends_on_id":"endive-8ig","type":"blocks","created_at":"2026-02-22T20:59:02Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-uck","title":"Migration: swap old main.py for new modules, end-to-end validation","description":"Final migration phase: replace old monolithic main.py with new modular architecture. Includes:\n- Wire new modules into main.py entry point (or replace entirely)\n- Ensure all experiment_configs/*.toml work with new config loader\n- Run full test suite (target: all existing tests pass or have clear replacement)\n- Run baseline experiments and compare results to existing baseline\n  - Same seed + same config should produce statistically equivalent results\n  - Exact bitwise match not required (architecture change), but distributions should match\n- Update scripts/run_all_experiments.py for new module structure\n- Update scripts/regenerate_all_plots.sh if needed\n- Clean up old code paths no longer needed\n- Update CLAUDE.md with new module locations and patterns\n\nValidation checklist:\n- [ ] All unit tests pass (target: 400+)\n- [ ] All integration tests pass\n- [ ] Baseline experiment results within 5% of previous\n- [ ] Plotting pipeline produces correct output\n- [ ] Consolidated parquet format compatible\n- [ ] Determinism preserved: same seed = identical results\n- [ ] Performance: simulation speed \u003e= 800x real-time","status":"closed","priority":2,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:14:38Z","created_by":"Chris Douglas","updated_at":"2026-02-22T20:00:38Z","closed_at":"2026-02-22T20:00:38Z","close_reason":"Migration complete: CLI uses load_simulation_config + Simulation, old tests deleted, _legacy.py removed","dependencies":[{"issue_id":"endive-uck","depends_on_id":"endive-2m0","type":"blocks","created_at":"2026-02-22T18:45:05Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-uck","depends_on_id":"endive-byj","type":"blocks","created_at":"2026-02-22T18:15:36Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-uck","depends_on_id":"endive-sn3","type":"blocks","created_at":"2026-02-22T18:15:40Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-vq0","title":"Epic: Simulator rewrite per SPEC.md","description":"Rewrite the Endive simulator following SPEC.md architecture. Uniform Catalog interface (read/commit), StorageProvider with opaque latencies, typed Transactions (FastAppend/MergeAppend/ValidatedOverwrite), Workload generator with topology ownership, CommitResult as sole public type. Each phase includes unit tests and integration tests.","status":"closed","priority":1,"issue_type":"epic","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:13:07Z","created_by":"Chris Douglas","updated_at":"2026-02-22T20:03:10Z","closed_at":"2026-02-22T20:03:10Z","close_reason":"All subtasks complete. Simulator rewritten per SPEC.md: StorageProvider, Catalog, Transaction types, ConflictDetector, Workload, Simulation runner, Config loading, CLI migration, dead code cleanup. 479 tests passing.","dependencies":[{"issue_id":"endive-vq0","depends_on_id":"endive-86t","type":"blocks","created_at":"2026-02-22T18:15:56Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-9tv","type":"blocks","created_at":"2026-02-22T18:16:00Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-byj","type":"blocks","created_at":"2026-02-22T18:16:03Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-f34","type":"blocks","created_at":"2026-02-22T18:15:53Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-iyg","type":"blocks","created_at":"2026-02-22T18:15:50Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-jz9","type":"blocks","created_at":"2026-02-22T18:15:43Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-pcz","type":"blocks","created_at":"2026-02-22T18:15:48Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-sn3","type":"blocks","created_at":"2026-02-22T18:16:06Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-uck","type":"blocks","created_at":"2026-02-22T18:16:09Z","created_by":"Chris Douglas","metadata":"{}"},{"issue_id":"endive-vq0","depends_on_id":"endive-xxk","type":"blocks","created_at":"2026-02-22T18:45:12Z","created_by":"Chris Douglas","metadata":"{}"}]}
{"id":"endive-xxk","title":"Final cleanup: Comprehensive dead code sweep","description":"After migration (endive-uck) completes, do a thorough sweep to ensure no dead code remains before the epic closes.\n\n## Tasks\n- Remove ALL unused imports across the codebase\n- Remove any remaining dead code in all modules\n- Remove orphaned test files that no longer test active code\n- Remove stale experiment configs that reference old modules\n- Verify no old types (Txn, LogEntry, CatalogSnapshot from snapshot.py, etc.) leak through\n- Run full test suite (all 428+ tests)\n- Run linter/static analysis to catch any remaining issues\n- Verify all imports resolve correctly\n- Final confirmation that the codebase is clean\n\n## Context\nThis is the final gate before the epic (endive-vq0) closes. Blocked by Migration (endive-uck). Blocks the epic (endive-vq0).","status":"closed","priority":3,"issue_type":"task","owner":"chris_douglas@berkeley.edu","created_at":"2026-02-22T18:44:47Z","created_by":"Chris Douglas","updated_at":"2026-02-22T20:02:59Z","closed_at":"2026-02-22T20:02:59Z","close_reason":"Dead code sweep complete: deleted _legacy.py, capstats.py, experiment.py, analysis.py, test_distribution_conformance.py, and 14 old test files","dependencies":[{"issue_id":"endive-xxk","depends_on_id":"endive-uck","type":"blocks","created_at":"2026-02-22T18:45:09Z","created_by":"Chris Douglas","metadata":"{}"}]}
