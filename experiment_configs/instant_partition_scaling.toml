# Instant Catalog: Partition Scaling
#
# Shows how partitioning a single table increases throughput by isolating
# conflicts to partition boundaries. With N partitions, transactions to
# different partitions don't conflict, enabling ~NÃ— throughput.
#
# Key insight: Partitioning breaks the single-table bottleneck without
# schema changes (unlike multi-table approach).
#
# Sweep num_partitions: [1, 5, 10, 25, 50, 100]
# Sweep inter_arrival.scale: [20, 50, 100, 200, 500, 1000, 2000, 5000]
#
# Note: At high partition counts (100+), table metadata becomes O(N),
# creating a new bottleneck even when only M partitions conflict.

[simulation]
duration_ms = 3600000
output_path = "results.parquet"

[experiment]
label = "instant_partition_scaling"

[catalog]
num_tables = 1
num_groups = 1
backend = "service"
table_metadata_inlined = false

[catalog.service]
provider = "instant"  # 1ms CAS - isolate storage overhead

[partition]
enabled = true
num_partitions = 10
selection.distribution = "uniform"  # Uniform access for clean scaling analysis

[partition.partitions_per_txn]
mean = 1.5  # Most transactions touch 1-2 partitions
max = 5

[transaction]
retry = 10
runtime.min = 30000
runtime.mean = 180000
runtime.sigma = 1.5
inter_arrival.distribution = "exponential"
inter_arrival.scale = 100.0
real_conflict_probability = 0.0  # Trivial conflicts only
manifest_list_mode = "rewrite"

[storage]
provider = "s3"
max_parallel = 4
min_latency = 1
